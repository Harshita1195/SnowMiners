CREATE DATABASE CDP_DB;

CREATE SCHEMA CDP_SCHEMA;

create or replace TABLE CDP_DB.CDP_SCHEMA.CDP_CUST_DATA (
	CUSTOMER_ID VARCHAR(16777216),
	CUSTOMER_BRAND VARCHAR(16777216),
	DOB DATE,
	OPEN_DATE DATE,
	SEGMENT VARCHAR(16777216),
	POST_CODE_AREA VARCHAR(16777216)
);

create or replace TABLE CDP_DB.CDP_SCHEMA.CDP_BUDGET_DATA (
	CUSTOMER_ID VARCHAR(16777216),
	BUDGET_START_DATE DATE,
	BUDGET_CATEGORY VARCHAR(16777216),
	BUDGET_AMOUNT NUMBER(38,0),
	BUDGET_PERIOD VARCHAR(16777216)
);

create or replace TABLE CDP_DB.CDP_SCHEMA.CDP_TRANSACTION_DATA (
	CUSTOMER_ID VARCHAR(16777216),
	BRAND VARCHAR(16777216),
	PROPRIETARY_BANK_TRANSACTION_CODE VARCHAR(16777216),
	MERCHANT_BRAND_CODE NUMBER(38,0),
	MERCHANT_BRAND_NAME VARCHAR(16777216),
	MCC NUMBER(38,0),
	MERCHANT_SYSTEM_CATEGORY1_NAME VARCHAR(16777216),
	MERCHANT_SYSTEM_CATEGORY2_NAME VARCHAR(16777216),
	MERCHANT_SYSTEM_CATEGORY3_NAME VARCHAR(16777216),
	FCA_CODE VARCHAR(16777216),
	FCA_CATEGORY VARCHAR(16777216),
	START_DATE DATE,
	END_DATE DATE,
	CREDIT_DEBIT_FLAG VARCHAR(16777216),
	TXN_COUNT NUMBER(38,0),
	TXN_AMOUNT FLOAT
);

create or replace TABLE CDP_DB.CDP_SCHEMA.SAVED_QUERIES (
	UNIQUE_ID NUMBER(38,0),
	USER_QUERY VARCHAR(16777216),
	GENERATED_SQL VARCHAR(16777216),
	USER_ACTION VARCHAR(16777216),
	CHART_PREFERENCE VARCHAR(16777216),
	CHART_TYPE VARCHAR(16777216),
	X_AXIS VARCHAR(16777216),
	Y_AXIS VARCHAR(16777216),
	LEGEND_KEY VARCHAR(16777216),
	CAMPAIGN_NAME VARCHAR(16777216),
	CAMPAIGN_CONSUMER VARCHAR(16777216),
	CAMPAIGN_FREQUENCY VARCHAR(16777216)
);

CREATE STAGE CDP_DB.CDP_SCHEMA.CDP_STAGE;

create sequence cdp_db.cdp_schema.save_queries start with 1 increment by 1;